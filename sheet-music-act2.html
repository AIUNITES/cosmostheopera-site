<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Act II: What Are We, What Is - Sheet Music | COSMOS the OPERA</title>
  <meta name="description" content="Act II sheet music with audio playback for COSMOS the OPERA.">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¼</text></svg>">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root { --bg-dark: #0a0a0f; --bg-card: #12121a; --bg-score: #1a1a24; --text-primary: #fff; --text-secondary: #a0a0b0; --accent-purple: #9d4edd; --accent-cyan: #00d4ff; --accent-gold: #ffd700; --accent-pink: #ff6b9d; --accent-green: #00ff88; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-dark); color: var(--text-primary); line-height: 1.6; }
    .nav { background: var(--bg-card); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); position: sticky; top: 0; z-index: 100; }
    .nav-logo { font-size: 1.5rem; font-weight: 800; color: var(--accent-gold); text-decoration: none; }
    .nav-links { display: flex; gap: 25px; }
    .nav-links a { color: var(--text-secondary); text-decoration: none; font-size: 0.95rem; transition: color 0.3s; }
    .nav-links a:hover, .nav-links a.active { color: var(--accent-cyan); }
    .sheet-nav { background: var(--bg-card); padding: 15px 20px; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .sheet-nav-inner { max-width: 1100px; margin: 0 auto; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
    .sheet-nav a { color: var(--text-secondary); text-decoration: none; padding: 6px 12px; background: rgba(255,255,255,0.05); border-radius: 15px; font-size: 0.85rem; transition: all 0.3s; }
    .sheet-nav a:hover { background: rgba(0,212,255,0.2); color: var(--accent-cyan); }
    .sheet-nav a.active { background: rgba(157,78,221,0.3); color: var(--accent-purple); }
    .sheet-nav a.climax { background: rgba(255,107,157,0.2); color: var(--accent-pink); }
    .act-header { padding: 40px 20px; text-align: center; background: linear-gradient(135deg, rgba(0,212,255,0.15), rgba(157,78,221,0.1)); }
    .act-header h1 { font-size: clamp(1.8rem, 4vw, 2.5rem); margin-bottom: 10px; background: linear-gradient(135deg, #fff, var(--accent-cyan)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .act-header p { color: var(--text-secondary); }
    .audio-banner { background: linear-gradient(135deg, rgba(0,255,136,0.15), rgba(0,212,255,0.1)); border: 1px solid rgba(0,255,136,0.3); border-radius: 10px; padding: 15px 20px; margin: 20px auto; max-width: 1100px; display: flex; align-items: center; gap: 15px; }
    .audio-banner-icon { font-size: 2rem; }
    .audio-banner-text { flex: 1; }
    .audio-banner-text h3 { color: var(--accent-green); font-size: 1rem; margin-bottom: 3px; }
    .audio-banner-text p { color: var(--text-secondary); font-size: 0.85rem; }
    .audio-init-btn { background: var(--accent-green); color: #000; border: none; padding: 10px 20px; border-radius: 20px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
    .audio-init-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(0,255,136,0.4); }
    .audio-init-btn:disabled { background: #444; color: #888; cursor: not-allowed; }
    .audio-init-btn.ready { background: var(--accent-cyan); }
    .play-all-btn { background: linear-gradient(135deg, var(--accent-gold), var(--accent-pink)); color: #000; border: none; padding: 10px 20px; border-radius: 20px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
    .play-all-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(255,215,0,0.4); }
    .play-all-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .floating-controls { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(18,18,26,0.95); border: 1px solid rgba(0,255,136,0.3); border-radius: 30px; padding: 12px 25px; display: none; align-items: center; gap: 15px; z-index: 1000; backdrop-filter: blur(10px); box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
    .floating-controls.visible { display: flex; }
    .floating-controls.continuous { border-color: var(--accent-gold); box-shadow: 0 10px 40px rgba(255,215,0,0.3); }
    .continuous-badge { background: var(--accent-gold); color: #000; padding: 3px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: 700; display: none; }
    .now-playing-note { font-family: 'Courier New', monospace; font-size: 1.5rem; font-weight: bold; color: var(--accent-green); min-width: 50px; }
    .now-playing-text { color: var(--accent-cyan); font-style: italic; min-width: 100px; }
    .floating-progress { width: 120px; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden; }
    .floating-progress-bar { height: 100%; background: linear-gradient(90deg, var(--accent-green), var(--accent-cyan)); width: 0%; transition: width 0.1s; }
    .floating-btn { background: rgba(255,107,157,0.2); border: 1px solid var(--accent-pink); color: var(--accent-pink); padding: 6px 14px; border-radius: 15px; cursor: pointer; font-size: 0.85rem; }
    .content { max-width: 1100px; margin: 0 auto; padding: 40px 20px; padding-bottom: 100px; }
    .score-section { margin-bottom: 40px; }
    .score-header { background: linear-gradient(135deg, rgba(0,212,255,0.2), rgba(157,78,221,0.1)); border-radius: 10px 10px 0 0; padding: 20px; border-left: 4px solid var(--accent-cyan); display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 15px; }
    .score-header-info { flex: 1; }
    .score-header h3 { color: var(--accent-gold); font-size: 1.3rem; margin-bottom: 5px; }
    .score-meta { display: flex; gap: 15px; flex-wrap: wrap; font-size: 0.85rem; color: var(--text-secondary); }
    .score-meta span { background: rgba(255,255,255,0.1); padding: 3px 10px; border-radius: 15px; }
    .play-btn { background: rgba(0,255,136,0.2); border: 1px solid var(--accent-green); color: var(--accent-green); padding: 8px 16px; border-radius: 20px; cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 0.9rem; transition: all 0.3s; }
    .play-btn:hover { background: rgba(0,255,136,0.3); transform: scale(1.05); }
    .play-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .play-btn.playing { background: rgba(255,107,157,0.2); border-color: var(--accent-pink); color: var(--accent-pink); }
    .score-block { background: var(--bg-score); border-radius: 0 0 10px 10px; padding: 20px; overflow-x: auto; border: 1px solid rgba(255,255,255,0.05); border-top: none; }
    .measure-block { font-family: 'Courier New', monospace; font-size: 12px; line-height: 1.4; color: var(--text-secondary); white-space: pre; padding: 10px; border-radius: 6px; transition: all 0.3s; scroll-margin-top: 180px; }
    .measure-block.active { background: rgba(0,255,136,0.1); border-left: 4px solid var(--accent-green); box-shadow: 0 0 20px rgba(0,255,136,0.15); }
    .measure-block.climax-section { background: rgba(255,107,157,0.05); }
    .measure-block.climax-section.active { background: rgba(255,107,157,0.15); border-left-color: var(--accent-pink); }
    .score-annotation { background: rgba(0,212,255,0.1); border-radius: 8px; padding: 12px; margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary); border-left: 3px solid var(--accent-cyan); }
    .score-annotation strong { color: var(--accent-cyan); }
    .page-nav { display: flex; justify-content: space-between; padding: 30px 0; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 40px; flex-wrap: wrap; gap: 10px; }
    .page-nav a { color: var(--accent-cyan); text-decoration: none; padding: 12px 24px; background: rgba(0,212,255,0.1); border-radius: 25px; transition: all 0.3s; }
    .page-nav a:hover { background: rgba(0,212,255,0.2); }
    .footer { background: var(--bg-card); padding: 30px 20px; text-align: center; border-top: 1px solid rgba(255,255,255,0.05); }
    .footer p { color: var(--text-secondary); font-size: 0.85rem; }
    .footer a { color: var(--accent-purple); text-decoration: none; }
    @media (max-width: 768px) { .nav { flex-direction: column; gap: 15px; } .measure-block { font-size: 9px; } .audio-banner { flex-direction: column; text-align: center; } .floating-controls { padding: 10px 15px; width: 95%; flex-wrap: wrap; justify-content: center; } }
  </style>
</head>
<body>
  <nav class="nav">
    <a href="index.html" class="nav-logo">ğŸŒŒ COSMOS</a>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="notation.html">Vocal Notation</a>
      <a href="composition.html">AI Composition</a>
      <a href="gallery.html">Hubble Gallery</a>
      <a href="sheet-music.html" class="active">Sheet Music</a>
      <a href="words.html">Words</a>
    </div>
  </nav>
  <div class="sheet-nav">
    <div class="sheet-nav-inner">
      <a href="sheet-music.html">Index</a>
      <a href="sheet-music-act1-p1.html">Act I: 1-2</a>
      <a href="sheet-music-act1-p2.html">Act I: 3-5</a>
      <a href="sheet-music-act2.html" class="active">Act II</a>
      <a href="sheet-music-act3-p1.html">Act III: 1-2</a>
      <a href="sheet-music-act3-p2.html" class="climax">Act III: 3-5 â˜…</a>
    </div>
  </div>
  <header class="act-header">
    <h1>ğŸŒ™ ACT II â€” WE ARE</h1>
    <p>Scenes 1-2: "What Are We" and "What Is" â€” <span style="color: var(--accent-green);">ğŸ”Š Audio + Auto-Scroll</span></p>
  </header>
  <div class="audio-banner">
    <div class="audio-banner-icon">ğŸµ</div>
    <div class="audio-banner-text">
      <h3>Audio Playback with Auto-Scroll</h3>
      <p>Click to enable synthesized audio. The page scrolls to follow the music.</p>
    </div>
    <button class="audio-init-btn" id="audioInitBtn" onclick="initAudio()">Enable Audio</button>
    <button class="play-all-btn" id="playAllBtn" onclick="playFullOpera()" disabled>â–¶ Play Full Opera</button>
  </div>
  <div class="floating-controls" id="floatingControls">
    <span class="continuous-badge" id="continuousBadge">FULL OPERA</span>
    <div class="now-playing-note" id="floatingNote">--</div>
    <div class="now-playing-text" id="floatingText">Ready</div>
    <div class="floating-progress"><div class="floating-progress-bar" id="floatingProgress"></div></div>
    <button class="floating-btn" onclick="stopAll()">â–  Stop</button>
  </div>
  <main class="content">
    <!-- SCENE 1: WHAT ARE WE -->
    <section class="score-section" id="what-are-we">
      <div class="score-header">
        <div class="score-header-info">
          <h3>Scene 1: "What Are We" â€” Complete Score</h3>
          <div class="score-meta">
            <span>ğŸ¤ Philosopher (Bass-Baritone)</span>
            <span>â±ï¸ Ponderoso â™©= 56</span>
            <span>ğŸ”‘ E minor</span>
            <span>ğŸ“ 4/4</span>
          </div>
        </div>
        <button class="play-btn" id="playScene1" onclick="togglePlay('scene1')" disabled>â–¶ Play Scene 1</button>
      </div>
      <div class="score-block">
<div class="measure-block" id="s1m1">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 1-8: "what are we"                                   p (profound)
â”‚  â™©E3 â”€â†’ â™©F#3 â”€â†’ â—G3~~~~~~~~  (ascending: questioning)          [Câ†’Câ†’C]
â”‚  "what   are     we~~~~~~~~~"   Deep bass, sustained
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s1m2">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 9-24: "beings of light dressed in skin"              mp
â”‚  â™©E3 â”€â†’ â™©G3 â”€â†’ â™©A3 â”€â†’ â—B3~~~~  (ascending)                     [Câ†’CMâ†’CMâ†’M]
â”‚  "beings of light dressed in skin~~~~"
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s1m3">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 25-40: "here on this cosmic journey"                 mf
â”‚  â™©E3 â”€â†’ â™©F#3 â”€â†’ â™©G3 â”€â†’ â™©A3 â”€â†’ â—B3~~~~  (ascending)             [Câ†’Câ†’CMâ†’CMâ†’M]
â”‚  "here   on      this   cos-   mic journey~~~~"
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s1m4">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 41-56: "searching for meaning in the stars"          mf
â”‚  â™©B3 â”€â†’ â™©A3 â”€â†’ â™©G3 â”€â†’ â—E3~~~~  "searching..."                  [Mâ†’CMâ†’CMâ†’C]
â”‚  â™©E3 â”€â†’ â™©G3 â”€â†’ â™©B3 â”€â†’ â—D4~~~~  "for meaning in the stars"      [Câ†’CMâ†’Mâ†’HM]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block climax-section" id="s1m5">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 57-80: "we are the universe knowing itself"      f â˜… CLIMAX â˜…
â”‚  â™©E3 â”€â†’ â™©G3 â”€â†’ â™©B3 â”€â†’ â™©D4 â”€â†’ â—E4~~~~~~~~  (ascending octave)   [Câ†’CMâ†’Mâ†’HMâ†’H]
â”‚  "we     are     the    u-      ni-verse knowing itself~~~~"    ff
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s1m6">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 81-96: "what are we... what are we..."               mp â†’ pp
â”‚  â—E3~~~~~~~~  "what are we..."                                 [C] mp
â”‚  â—E3~~~~~~~~  "what are we..."                                 [C] pp, fading
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
      </div>
      <div class="score-annotation">
        <strong>Performance Notes:</strong> "What Are We" is a philosophical meditation. The bass-baritone should convey profound wonder. The climax "universe knowing itself" should be revelatory, then fade into questioning whispers.
      </div>
    </section>

    <!-- SCENE 2: WHAT IS -->
    <section class="score-section" id="what-is">
      <div class="score-header">
        <div class="score-header-info">
          <h3>Scene 2: "What Is" â€” Complete Score</h3>
          <div class="score-meta">
            <span>ğŸ¤ Mystic (Soprano) + Chorus</span>
            <span>â±ï¸ Misterioso â™©= 52</span>
            <span>ğŸ”‘ F major</span>
            <span>ğŸ“ 4/4</span>
          </div>
        </div>
        <button class="play-btn" id="playScene2" onclick="togglePlay('scene2')" disabled>â–¶ Play Scene 2</button>
      </div>
      <div class="score-block">
<div class="measure-block" id="s2m1">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 1-12: "what is... what is love"                      p (ethereal)
â”‚  â—F4~~~~~~~~  "what is..."                                     [H] p
â”‚  â™©F4 â”€â†’ â™©G4 â”€â†’ â™©A4 â”€â†’ â—Bb4~~~~  "what is love~~~~"            [Hâ†’Hâ†’Hâ†’H]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s2m2">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 13-28: "what is the force that moves the stars"      mp
â”‚  â™©F4 â”€â†’ â™©G4 â”€â†’ â™©A4 â”€â†’ â™©Bb4 â”€â†’ â—C5~~~~  (ascending)             [Hâ†’Hâ†’Hâ†’Hâ†’H]
â”‚  "what   is     the    force   that moves the stars~~~~"
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s2m3">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 29-44: "that beats in every heart"                   mf
â”‚  â™©C5 â”€â†’ â™©Bb4 â”€â†’ â™©A4 â”€â†’ â™©G4 â”€â†’ â—F4~~~~  (descending)            [Hâ†’Hâ†’Hâ†’Hâ†’H]
â”‚  "that   beats   in     ev-     ery heart~~~~"
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s2m4">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 45-60: "it is the one thing that connects us all"    mf
â”‚  â™©F4 â”€â†’ â™©A4 â”€â†’ â™©C5 â”€â†’ â—D5~~~~  "it is the one thing..."        [Hâ†’Hâ†’Hâ†’H]
â”‚  â™©D5 â”€â†’ â™©C5 â”€â†’ â™©Bb4 â”€â†’ â—A4~~~~  "that connects us all~~~~"     [Hâ†’Hâ†’Hâ†’H]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block climax-section" id="s2m5">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 61-84: "LOVE!"                                   fff â˜…â˜…â˜… CLIMAX â˜…â˜…â˜…
â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚  â•‘   â—F5~~~~~~~~~~~~~~~~~~~~~~~~  "â˜…â˜…â˜… LOVE! â˜…â˜…â˜…"  [H] fff               â•‘
â”‚  â•‘   SOPRANO SOLO - Chorus enters with harmonies underneath              â•‘
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s2m6">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 85-108: "love is... love is..."                      mp â†’ pp
â”‚  â—C5~~~~~~~~  "love is..."                                     [H] mp
â”‚  â—A4~~~~~~~~  "love is..."                                     [H] p
â”‚  â—F4~~~~~~~~  "love..."                                        [H] pp, sacred
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
      </div>
      <div class="score-annotation">
        <strong>Performance Notes:</strong> "What Is" explores the universal force of love. The soprano's "LOVE!" should be transcendent. The repeated "love is..." creates a meditative ending to Act II.
      </div>
    </section>

    <div class="sheet-nav" style="margin-top: 40px; border-top: 1px solid rgba(255,255,255,0.05); border-bottom: none;">
      <div class="sheet-nav-inner">
        <a href="sheet-music.html">Index</a>
        <a href="sheet-music-act1-p1.html">Act I: 1-2</a>
        <a href="sheet-music-act1-p2.html">Act I: 3-5</a>
        <a href="sheet-music-act2.html" class="active">Act II</a>
        <a href="sheet-music-act3-p1.html">Act III: 1-2</a>
        <a href="sheet-music-act3-p2.html" class="climax">Act III: 3-5 â˜…</a>
      </div>
    </div>
    <nav class="page-nav">
      <a href="sheet-music-act1-p2.html">â† Act I Part 2</a>
      <a href="sheet-music-act3-p1.html">Act III Part 1 â†’</a>
    </nav>
  </main>
  <footer class="footer">
    <p>Â© 2002-2026 COSMOS the OPERA. All Rights Reserved. DMCA Protected.<br>
    <a href="index.html">Home</a> | <a href="sheet-music.html">Sheet Music Index</a></p>
  </footer>
  <script>
let audioReady=false,synth=null,isPlaying={},currentMeasure=null,currentScene=null,continuousMode=false;
const NEXT_PAGE='sheet-music-act3-p1.html';
const PAGE_SCENES=['scene1','scene2'];

const scene1Data={tempo:56,notes:[
{note:'E3',duration:1.5,text:'what',dyn:0.4,m:'s1m1'},
{note:'F#3',duration:1.5,text:'are',dyn:0.4,m:'s1m1'},
{note:'G3',duration:3,text:'we',dyn:0.45,m:'s1m1'},
{note:null,duration:0.5,m:'s1m1'},
{note:'E3',duration:0.75,text:'beings',dyn:0.5,m:'s1m2'},
{note:'G3',duration:0.75,text:'of',dyn:0.5,m:'s1m2'},
{note:'A3',duration:0.75,text:'light',dyn:0.55,m:'s1m2'},
{note:'B3',duration:3,text:'skin',dyn:0.6,m:'s1m2'},
{note:null,duration:0.5,m:'s1m2'},
{note:'E3',duration:0.6,text:'here',dyn:0.55,m:'s1m3'},
{note:'F#3',duration:0.6,text:'on',dyn:0.55,m:'s1m3'},
{note:'G3',duration:0.6,text:'this',dyn:0.6,m:'s1m3'},
{note:'A3',duration:0.6,text:'cos-',dyn:0.6,m:'s1m3'},
{note:'B3',duration:3,text:'mic',dyn:0.65,m:'s1m3'},
{note:null,duration:0.5,m:'s1m3'},
{note:'B3',duration:0.75,text:'searching',dyn:0.6,m:'s1m4'},
{note:'A3',duration:0.75,m:'s1m4'},
{note:'G3',duration:0.75,m:'s1m4'},
{note:'E3',duration:2,m:'s1m4'},
{note:'E3',duration:0.5,text:'for',dyn:0.6,m:'s1m4'},
{note:'G3',duration:0.5,text:'meaning',dyn:0.65,m:'s1m4'},
{note:'B3',duration:0.5,text:'in',dyn:0.7,m:'s1m4'},
{note:'D4',duration:2.5,text:'stars',dyn:0.75,m:'s1m4'},
{note:null,duration:0.5,m:'s1m4'},
{note:'E3',duration:0.5,text:'we',dyn:0.75,m:'s1m5'},
{note:'G3',duration:0.5,text:'are',dyn:0.8,m:'s1m5'},
{note:'B3',duration:0.5,text:'the',dyn:0.85,m:'s1m5'},
{note:'D4',duration:0.5,text:'u-',dyn:0.9,m:'s1m5'},
{note:'E4',duration:5,text:'ni-verse!',dyn:1.0,m:'s1m5'},
{note:null,duration:1,m:'s1m5'},
{note:'E3',duration:3,text:'what are we...',dyn:0.5,m:'s1m6'},
{note:'E3',duration:4,text:'what are we...',dyn:0.3,m:'s1m6'}
]};

const scene2Data={tempo:52,notes:[
{note:'F4',duration:3,text:'what is...',dyn:0.4,m:'s2m1'},
{note:'F4',duration:0.75,text:'what',dyn:0.45,m:'s2m1'},
{note:'G4',duration:0.75,text:'is',dyn:0.5,m:'s2m1'},
{note:'A4',duration:0.75,text:'love',dyn:0.55,m:'s2m1'},
{note:'Bb4',duration:2.5,m:'s2m1'},
{note:null,duration:0.5,m:'s2m1'},
{note:'F4',duration:0.5,text:'what',dyn:0.5,m:'s2m2'},
{note:'G4',duration:0.5,text:'is',dyn:0.5,m:'s2m2'},
{note:'A4',duration:0.5,text:'the',dyn:0.55,m:'s2m2'},
{note:'Bb4',duration:0.5,text:'force',dyn:0.6,m:'s2m2'},
{note:'C5',duration:3,text:'stars',dyn:0.65,m:'s2m2'},
{note:null,duration:0.5,m:'s2m2'},
{note:'C5',duration:0.75,text:'that',dyn:0.6,m:'s2m3'},
{note:'Bb4',duration:0.75,text:'beats',dyn:0.55,m:'s2m3'},
{note:'A4',duration:0.75,text:'in',dyn:0.55,m:'s2m3'},
{note:'G4',duration:0.75,text:'ev-',dyn:0.5,m:'s2m3'},
{note:'F4',duration:2.5,text:'ery heart',dyn:0.5,m:'s2m3'},
{note:null,duration:0.5,m:'s2m3'},
{note:'F4',duration:0.5,text:'it',dyn:0.55,m:'s2m4'},
{note:'A4',duration:0.5,text:'is',dyn:0.6,m:'s2m4'},
{note:'C5',duration:0.5,text:'the',dyn:0.65,m:'s2m4'},
{note:'D5',duration:2,text:'one',dyn:0.7,m:'s2m4'},
{note:'D5',duration:0.5,text:'that',dyn:0.65,m:'s2m4'},
{note:'C5',duration:0.5,text:'con-',dyn:0.6,m:'s2m4'},
{note:'Bb4',duration:0.5,text:'nects',dyn:0.55,m:'s2m4'},
{note:'A4',duration:2.5,text:'us all',dyn:0.55,m:'s2m4'},
{note:null,duration:0.5,m:'s2m4'},
{note:'F5',duration:6,text:'LOVE!',dyn:1.0,m:'s2m5'},
{note:null,duration:1,m:'s2m5'},
{note:'C5',duration:3,text:'love is...',dyn:0.5,m:'s2m6'},
{note:'A4',duration:3,text:'love is...',dyn:0.4,m:'s2m6'},
{note:'F4',duration:4,text:'love...',dyn:0.3,m:'s2m6'}
]};

const sceneDataMap={scene1:scene1Data,scene2:scene2Data};

async function initAudio(){
  const btn=document.getElementById('audioInitBtn');
  btn.textContent='Initializing...';btn.disabled=true;
  try{
    await Tone.start();
    synth=new Tone.PolySynth(Tone.Synth,{oscillator:{type:'sine'},envelope:{attack:0.15,decay:0.3,sustain:0.8,release:1.0}}).toDestination();
    const reverb=new Tone.Reverb({decay:4,wet:0.5}).toDestination();
    synth.connect(reverb);
    audioReady=true;btn.textContent='âœ“ Audio Ready';btn.classList.add('ready');
    document.getElementById('playScene1').disabled=false;
    document.getElementById('playScene2').disabled=false;
    document.getElementById('playAllBtn').disabled=false;
    checkAutoplay();
  }catch(e){btn.textContent='Audio Failed';console.error(e);}
}

function checkAutoplay(){
  const params=new URLSearchParams(window.location.search);
  if(params.get('autoplay')==='continuous'){
    continuousMode=true;
    playAllScenesSequentially();
  }
}

function scrollToMeasure(id){
  if(currentMeasure)document.getElementById(currentMeasure)?.classList.remove('active');
  const el=document.getElementById(id);
  if(el&&id!==currentMeasure){el.classList.add('active');el.scrollIntoView({behavior:'smooth',block:'center'});currentMeasure=id;}
}

async function playScene(sceneId){
  const data=sceneDataMap[sceneId];
  if(!data)return;
  const bpm=data.tempo,beatDuration=60/bpm;
  let totalBeats=data.notes.reduce((s,n)=>s+n.duration,0),currentBeat=0;
  const floatingControls=document.getElementById('floatingControls');
  const progressBar=document.getElementById('floatingProgress');
  const noteDisplay=document.getElementById('floatingNote');
  const textDisplay=document.getElementById('floatingText');
  floatingControls.classList.add('visible');
  if(continuousMode){floatingControls.classList.add('continuous');document.getElementById('continuousBadge').style.display='inline';}
  scrollToMeasure(data.notes[0].m);
  for(let i=0;i<data.notes.length;i++){
    if(!isPlaying[sceneId])return false;
    const note=data.notes[i],durationSec=note.duration*beatDuration;
    scrollToMeasure(note.m);
    if(note.note){noteDisplay.textContent=note.note;textDisplay.textContent=note.text?'"'+note.text+'"':'â™ª';synth.triggerAttackRelease(note.note,durationSec*0.9,Tone.now(),note.dyn);}
    else{noteDisplay.textContent='â€”';textDisplay.textContent='(rest)';}
    currentBeat+=note.duration;progressBar.style.width=(currentBeat/totalBeats)*100+'%';
    await new Promise(r=>setTimeout(r,durationSec*1000));
  }
  return true;
}

async function togglePlay(sceneId){
  if(!audioReady)return;
  if(currentScene&&currentScene!==sceneId){stopAll();}
  const btnMap={scene1:'playScene1',scene2:'playScene2'};
  const playBtn=document.getElementById(btnMap[sceneId]);
  if(isPlaying[sceneId]){stopAll();return;}
  continuousMode=false;
  isPlaying[sceneId]=true;currentScene=sceneId;
  playBtn.classList.add('playing');playBtn.textContent='â¸ Playing...';
  const completed=await playScene(sceneId);
  if(completed)stopAll();
}

async function playAllScenesSequentially(){
  for(const sceneId of PAGE_SCENES){
    if(!continuousMode)break;
    const btnMap={scene1:'playScene1',scene2:'playScene2'};
    const btn=document.getElementById(btnMap[sceneId]);
    isPlaying[sceneId]=true;currentScene=sceneId;
    btn.classList.add('playing');btn.textContent='â¸ Playing...';
    const completed=await playScene(sceneId);
    btn.classList.remove('playing');btn.textContent='â–¶ Play Scene '+(PAGE_SCENES.indexOf(sceneId)+1);
    isPlaying[sceneId]=false;
    if(!completed||!continuousMode)break;
  }
  if(continuousMode&&NEXT_PAGE){window.location.href=NEXT_PAGE+'?autoplay=continuous';}
  else{stopAll();}
}

function playFullOpera(){
  if(!audioReady)return;
  stopAll();
  continuousMode=true;
  document.getElementById('playAllBtn').textContent='â¸ Playing Opera...';
  playAllScenesSequentially();
}

function stopAll(){
  continuousMode=false;
  Object.keys(isPlaying).forEach(k=>isPlaying[k]=false);
  currentScene=null;
  ['playScene1','playScene2'].forEach((id,i)=>{const btn=document.getElementById(id);if(btn){btn.classList.remove('playing');btn.textContent='â–¶ Play Scene '+(i+1);}});
  document.getElementById('playAllBtn').textContent='â–¶ Play Full Opera';
  document.getElementById('floatingControls').classList.remove('visible','continuous');
  document.getElementById('continuousBadge').style.display='none';
  document.getElementById('floatingProgress').style.width='0%';
  document.getElementById('floatingNote').textContent='--';
  document.getElementById('floatingText').textContent='Ready';
  if(currentMeasure){document.getElementById(currentMeasure)?.classList.remove('active');currentMeasure=null;}
  if(synth)synth.releaseAll();
}

window.onload=()=>{const params=new URLSearchParams(window.location.search);if(params.get('autoplay')==='continuous'){initAudio();}};
  </script>
</body>
</html>
