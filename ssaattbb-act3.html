<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Act III: We Return - SSAATTBB Score | COSMOS the OPERA</title>
  <meta name="description" content="Act III SSAATTBB orchestral score for COSMOS the OPERA - Grand Finale with audio playback.">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¼</text></svg>">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root { --bg-dark: #0a0a0f; --bg-card: #12121a; --bg-score: #1a1a24; --text-primary: #fff; --text-secondary: #a0a0b0; --accent-purple: #9d4edd; --accent-cyan: #00d4ff; --accent-gold: #ffd700; --accent-pink: #ff6b9d; --accent-green: #00ff88; }
    html { scroll-behavior: smooth; }
    body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg-dark); color: var(--text-primary); line-height: 1.6; }
    .nav { background: var(--bg-card); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); position: sticky; top: 0; z-index: 100; }
    .nav-logo { font-size: 1.5rem; font-weight: 800; color: var(--accent-gold); text-decoration: none; }
    .nav-links { display: flex; gap: 25px; }
    .nav-links a { color: var(--text-secondary); text-decoration: none; font-size: 0.95rem; transition: color 0.3s; }
    .nav-links a:hover, .nav-links a.active { color: var(--accent-cyan); }
    .sheet-nav { background: var(--bg-card); padding: 15px 20px; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .sheet-nav-inner { max-width: 1100px; margin: 0 auto; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; align-items: center; }
    .sheet-nav a { color: var(--text-secondary); text-decoration: none; padding: 6px 12px; background: rgba(255,255,255,0.05); border-radius: 15px; font-size: 0.85rem; transition: all 0.3s; }
    .sheet-nav a:hover { background: rgba(157,78,221,0.2); color: var(--accent-purple); }
    .sheet-nav a.active-gold { background: rgba(255,215,0,0.3); color: var(--accent-gold); }
    .sheet-nav a.climax { background: rgba(255,107,157,0.2); color: var(--accent-pink); }
    .sheet-nav .label { font-weight: 600; font-size: 0.8rem; margin-right: 5px; }
    .sheet-nav .divider { color: rgba(255,255,255,0.3); margin: 0 5px; }
    .act-header { padding: 40px 20px; text-align: center; background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,107,157,0.15), rgba(157,78,221,0.1)); }
    .act-header h1 { font-size: clamp(1.8rem, 4vw, 2.5rem); margin-bottom: 10px; background: linear-gradient(135deg, var(--accent-gold), var(--accent-pink), #fff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .act-header p { color: var(--text-secondary); }
    .finale-badge { display: inline-block; background: linear-gradient(135deg, var(--accent-gold), var(--accent-pink)); color: #000; padding: 5px 15px; border-radius: 20px; font-weight: 700; font-size: 0.9rem; margin-top: 10px; animation: pulse 2s ease-in-out infinite; }
    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    .audio-banner { background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,107,157,0.1)); border: 1px solid rgba(255,215,0,0.3); border-radius: 10px; padding: 15px 20px; margin: 20px auto; max-width: 1100px; display: flex; align-items: center; gap: 15px; flex-wrap: wrap; }
    .audio-banner-icon { font-size: 2rem; }
    .audio-banner-text { flex: 1; min-width: 200px; }
    .audio-banner-text h3 { color: var(--accent-gold); font-size: 1rem; margin-bottom: 3px; }
    .audio-banner-text p { color: var(--text-secondary); font-size: 0.85rem; }
    .audio-init-btn { background: var(--accent-green); color: #000; border: none; padding: 10px 20px; border-radius: 20px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
    .audio-init-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(0,255,136,0.4); }
    .audio-init-btn:disabled { background: #444; color: #888; cursor: not-allowed; }
    .audio-init-btn.ready { background: var(--accent-cyan); }
    .play-all-btn { background: linear-gradient(135deg, var(--accent-gold), var(--accent-pink)); color: #000; border: none; padding: 10px 20px; border-radius: 20px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
    .play-all-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(255,215,0,0.4); }
    .play-all-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .voice-select { background: var(--bg-card); color: var(--text-primary); border: 1px solid rgba(0,255,136,0.3); padding: 8px 12px; border-radius: 15px; font-size: 0.85rem; cursor: pointer; }
    .voice-select:disabled { opacity: 0.5; cursor: not-allowed; }
    .voice-select:focus { outline: none; border-color: var(--accent-cyan); }
    .voice-options { display: flex; gap: 8px; flex-wrap: wrap; opacity: 0.5; pointer-events: none; }
    .voice-options.enabled { opacity: 1; pointer-events: auto; }
    .voice-checkbox { display: flex; align-items: center; gap: 4px; background: var(--bg-card); border: 1px solid rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 15px; cursor: pointer; font-size: 0.8rem; transition: all 0.3s; }
    .voice-checkbox:hover { border-color: var(--accent-cyan); }
    .voice-checkbox input { display: none; }
    .voice-checkbox input:checked + span { color: var(--accent-green); }
    .voice-checkbox:has(input:checked) { border-color: var(--accent-green); background: rgba(0,255,136,0.1); }
    .voice-guide { max-width: 1100px; margin: 0 auto 10px; padding: 8px 15px; background: rgba(255,255,255,0.03); border-radius: 8px; display: flex; flex-wrap: wrap; gap: 12px; align-items: center; font-size: 0.8rem; color: var(--text-secondary); }
    .voice-guide-label { color: var(--accent-gold); font-weight: 600; }
    .voice-guide b { color: var(--accent-cyan); }
    .voice-guide-tip { color: var(--accent-pink); margin-left: auto; }
    .floating-controls { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(18,18,26,0.95); border: 1px solid rgba(0,255,136,0.3); border-radius: 30px; padding: 12px 25px; display: none; align-items: center; gap: 15px; z-index: 1000; backdrop-filter: blur(10px); }
    .floating-controls.visible { display: flex; }
    .floating-controls.continuous { border-color: var(--accent-gold); box-shadow: 0 10px 40px rgba(255,215,0,0.3); }
    .continuous-badge { background: var(--accent-gold); color: #000; padding: 3px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: 700; display: none; }
    .now-playing-note { font-family: 'Courier New', monospace; font-size: 1.5rem; font-weight: bold; color: var(--accent-green); min-width: 50px; }
    .now-playing-text { color: var(--accent-cyan); font-style: italic; min-width: 100px; }
    .floating-progress { width: 120px; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden; }
    .floating-progress-bar { height: 100%; background: linear-gradient(90deg, var(--accent-green), var(--accent-cyan)); width: 0%; transition: width 0.1s; }
    .floating-btn { background: rgba(255,107,157,0.2); border: 1px solid var(--accent-pink); color: var(--accent-pink); padding: 6px 14px; border-radius: 15px; cursor: pointer; font-size: 0.85rem; }
    .loop-btn { background: rgba(157,78,221,0.2); border: 1px solid var(--accent-purple); color: var(--accent-purple); }
    .loop-btn.active { background: rgba(157,78,221,0.4); border-color: var(--accent-gold); color: var(--accent-gold); }
    .content { max-width: 1100px; margin: 0 auto; padding: 40px 20px; padding-bottom: 100px; }
    .score-section { margin-bottom: 40px; }
    .score-header { background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,107,157,0.15)); border-radius: 10px 10px 0 0; padding: 20px; border-left: 4px solid var(--accent-gold); display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 15px; }
    .score-header.ultimate { border-left-color: var(--accent-pink); background: linear-gradient(135deg, rgba(255,107,157,0.25), rgba(255,215,0,0.2), rgba(157,78,221,0.15)); }
    .score-header-info { flex: 1; }
    .score-header h3 { color: var(--accent-gold); font-size: 1.3rem; margin-bottom: 5px; }
    .score-meta { display: flex; gap: 15px; flex-wrap: wrap; font-size: 0.85rem; color: var(--text-secondary); }
    .score-meta span { background: rgba(255,255,255,0.1); padding: 3px 10px; border-radius: 15px; }
    .play-btn { background: rgba(0,255,136,0.2); border: 1px solid var(--accent-green); color: var(--accent-green); padding: 8px 16px; border-radius: 20px; cursor: pointer; display: flex; align-items: center; gap: 6px; font-size: 0.9rem; transition: all 0.3s; }
    .play-btn:hover { background: rgba(0,255,136,0.3); transform: scale(1.05); }
    .play-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    .play-btn.playing { background: rgba(255,107,157,0.2); border-color: var(--accent-pink); color: var(--accent-pink); }
    .score-block { background: var(--bg-score); border-radius: 0 0 10px 10px; padding: 20px; overflow-x: auto; border: 1px solid rgba(255,255,255,0.05); border-top: none; }
    .measure-block { font-family: 'Courier New', monospace; font-size: 12px; line-height: 1.4; color: var(--text-secondary); white-space: pre; padding: 10px; border-radius: 6px; transition: all 0.3s; scroll-margin-top: 180px; }
    .measure-block.active { background: rgba(0,255,136,0.1); border-left: 4px solid var(--accent-green); box-shadow: 0 0 20px rgba(0,255,136,0.15); }
    .measure-block.climax-section { background: rgba(255,107,157,0.05); }
    .measure-block.climax-section.active { background: rgba(255,107,157,0.15); border-left-color: var(--accent-pink); }
    .measure-block.ultimate-climax { background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,107,157,0.1)); }
    .measure-block.ultimate-climax.active { background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,107,157,0.2)); border-left: 4px solid var(--accent-gold); box-shadow: 0 0 30px rgba(255,215,0,0.3); }
    .score-annotation { background: rgba(255,215,0,0.1); border-radius: 8px; padding: 12px; margin-top: 10px; font-size: 0.85rem; color: var(--text-secondary); border-left: 3px solid var(--accent-gold); }
    .score-annotation strong { color: var(--accent-gold); }
    .page-nav { display: flex; justify-content: space-between; padding: 30px 0; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 40px; flex-wrap: wrap; gap: 10px; }
    .page-nav a { color: var(--accent-gold); text-decoration: none; padding: 12px 24px; background: rgba(255,215,0,0.1); border-radius: 25px; transition: all 0.3s; }
    .page-nav a:hover { background: rgba(255,215,0,0.2); }
    .footer { background: var(--bg-card); padding: 30px 20px; text-align: center; border-top: 1px solid rgba(255,255,255,0.05); }
    .footer p { color: var(--text-secondary); font-size: 0.85rem; }
    .footer a { color: var(--accent-purple); text-decoration: none; }
    .opera-complete { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: center; flex-direction: column; }
    .opera-complete.visible { display: flex; }
    .opera-complete h2 { font-size: 3rem; background: linear-gradient(135deg, var(--accent-gold), var(--accent-pink)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 20px; animation: pulse 1.5s ease-in-out infinite; }
    .opera-complete p { color: var(--text-secondary); font-size: 1.2rem; }
    @media (max-width: 768px) { .nav { flex-direction: column; gap: 15px; } .measure-block { font-size: 9px; } .audio-banner { flex-direction: column; text-align: center; } .floating-controls { padding: 10px 15px; width: 95%; flex-wrap: wrap; justify-content: center; } }
  </style>
</head>
<body>
  <!-- AIUNITES Webring -->
  <style>.aiunites-bar{background:linear-gradient(90deg,#0a0a0f,#1a1a2e);border-bottom:1px solid rgba(99,102,241,.3);padding:8px 0;font-size:12px}.aiunites-bar-content{max-width:1400px;margin:0 auto;padding:0 20px;display:flex;align-items:center;gap:12px;overflow-x:auto;scrollbar-width:none}.aiunites-bar-content::-webkit-scrollbar{display:none}.aiunites-bar a{color:rgba(255,255,255,.7);text-decoration:none;white-space:nowrap;transition:color .2s}.aiunites-bar a:hover{color:#fff}.aiunites-bar-brand{color:#6366f1!important;font-weight:600}.aiunites-bar-brand:hover{color:#818cf8!important}.aiunites-bar-divider{color:rgba(255,255,255,.2)}</style>
  <div class="aiunites-bar"><div class="aiunites-bar-content"><a href="https://aiunites.github.io/aiunites-site/" class="aiunites-bar-brand">â—† AIUNITES</a><span class="aiunites-bar-divider">|</span><a href="https://aiunites.github.io/aizines-app/">AIZines</a><a href="https://aiunites.github.io/aibyjob-demo/">AIByJob</a><a href="https://aiunites.github.io/redomy-demo/">Redomy</a><a href="https://aiunites.github.io/videobate-site/">VideoBate</a><a href="https://aiunites.github.io/furnishthings-site/">FurnishThings</a><a href="https://aiunites.github.io/bizstry-site/">BizStry</a><a href="https://aiunites.github.io/aiyhwh-site/">AI YHWH</a><a href="https://aiunites.github.io/cloudsion-site/">Cloudsion</a><a href="https://aiunites.github.io/gameatica-site/">Gameatica</a><a href="https://aiunites.github.io/uptownit-site/">UptownIT</a><a href="https://aiunites.github.io/inthisworld-site/">InThisWorld</a><a href="https://aiunites.github.io/erpise-site/">ERPise</a><a href="https://aiunites.github.io/erpize-site/">ERPize</a><a href="https://aiunites.github.io/cosmostheopera-site/">ğŸŒŒ COSMOS</a></div></div>

  <nav class="nav">
    <a href="index.html" class="nav-logo">ğŸŒŒ COSMOS</a>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="notation.html">Vocal Notation</a>
      <a href="composition.html">AI Composition</a>
      <a href="gallery.html">Hubble Gallery</a>
      <a href="sheet-music.html" class="active">Sheet Music</a>
      <a href="words.html">Words</a>
    </div>
  </nav>
  <div class="sheet-nav">
    <div class="sheet-nav-inner">
      <span class="label" style="color: var(--accent-cyan);">SATB:</span>
      <a href="sheet-music.html">Index</a>
      <a href="sheet-music-act1-p1.html">I:1-2</a>
      <a href="sheet-music-act1-p2.html">I:3-5</a>
      <a href="sheet-music-act2.html">II</a>
      <a href="sheet-music-act3-p1.html">III:1-2</a>
      <a href="sheet-music-act3-p2.html" class="climax">III:3-5â˜…</a>
      <span class="divider">|</span>
      <span class="label" style="color: var(--accent-gold);">SSAATTBB:</span>
      <a href="ssaattbb-index.html">Index</a>
      <a href="ssaattbb-act1.html">Act I</a>
      <a href="ssaattbb-act2.html">Act II</a>
      <a href="ssaattbb-act3.html" class="climax active-gold">Act III â˜…</a>
    </div>
  </div>
  <header class="act-header">
    <h1>ğŸŒŸ ACT III â€” WE RETURN</h1>
    <p>SSAATTBB Orchestral Score â€¢ 8-Part Chorus â€¢ <span style="color: var(--accent-green);">ğŸ”Š Audio + Auto-Scroll</span></p>
    <div class="finale-badge">â˜…â˜…â˜… GRAND FINALE â˜…â˜…â˜…</div>
  </header>
  <div class="audio-banner">
    <div class="audio-banner-icon">ğŸµ</div>
    <div class="audio-banner-text">
      <h3>Audio Playback with Auto-Scroll</h3>
      <p>Click to enable synthesized audio. Experience the triumphant conclusion!</p>
    </div>
    <button class="audio-init-btn" id="audioInitBtn" onclick="initAudio()">Enable Audio</button>
    <div class="voice-options" id="voiceOptions">
      <label class="voice-checkbox" title="Clean sine wave - clear melodic lines"><input type="checkbox" value="pure" checked onchange="changeVoice()"><span>ğŸµ Pure</span></label>
      <label class="voice-checkbox" title="Triangle wave + chorus - warm vocal 'ahhh' sound"><input type="checkbox" value="choir" onchange="changeVoice()"><span>ğŸ¤ Choir</span></label>
      <label class="voice-checkbox" title="Square wave - church/sacred feel"><input type="checkbox" value="organ" onchange="changeVoice()"><span>ğŸ¹ Organ</span></label>
      <label class="voice-checkbox" title="Sawtooth wave + reverb - rich orchestral"><input type="checkbox" value="strings" onchange="changeVoice()"><span>ğŸ» Strings</span></label>
      <label class="voice-checkbox" title="Fat sine + chorus - full warm blend"><input type="checkbox" value="rich" onchange="changeVoice()"><span>âœ¨ Rich</span></label>
    </div>
    <button class="play-all-btn" id="playAllBtn" onclick="playFullOpera()" disabled>â–¶ Play Full Opera</button>
  </div>
  <div class="voice-guide">
    <span class="voice-guide-label">ğŸ¼ Voice Guide:</span>
    <span><b>Pure</b> = Clean tone</span>
    <span><b>Choir</b> = Vocal warmth</span>
    <span><b>Organ</b> = Sacred/church</span>
    <span><b>Strings</b> = Orchestral</span>
    <span><b>Rich</b> = Full harmonics</span>
    <span class="voice-guide-tip">ğŸ’¡ Select multiple for layered sound!</span>
  </div>
  <div class="floating-controls" id="floatingControls">
    <span class="continuous-badge" id="continuousBadge">FULL OPERA</span>
    <div class="now-playing-note" id="floatingNote">--</div>
    <div class="now-playing-text" id="floatingText">Ready</div>
    <div class="floating-progress"><div class="floating-progress-bar" id="floatingProgress"></div></div>
    <button class="floating-btn loop-btn" id="loopBtn" onclick="toggleLoop()" title="Loop current scene">â†» Loop</button>
    <button class="floating-btn" onclick="stopAll()">â–  Stop</button>
  </div>
  <div class="opera-complete" id="operaComplete">
    <h2>âœ¨ OPERA COMPLETE âœ¨</h2>
    <p>COSMOS the OPERA â€” We Are One</p>
  </div>
  <main class="content">
    <!-- SCENE 1: BELIEVE -->
    <section class="score-section" id="scene1">
      <div class="score-header">
        <div class="score-header-info">
          <h3>Scene 1: "Believe" â€” SSAATTBB Score</h3>
          <div class="score-meta">
            <span>ğŸ¤ Prophet (Tenor) + Chorus</span>
            <span>â±ï¸ Maestoso â™©= 76</span>
            <span>ğŸ”‘ Ab major</span>
            <span>ğŸ“ 4/4</span>
          </div>
        </div>
        <button class="play-btn" id="playScene1" onclick="togglePlay('scene1')" disabled>â–¶ Play Scene 1</button>
      </div>
      <div class="score-block">
<div class="measure-block" id="s1m1">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 1-16: "believe in the light"                         mf (prophetic)
â”‚  â™©Ab4 â”€â†’ â™©Bb4 â”€â†’ â™©C5 â”€â†’ â™©Db5 â”€â†’ â—Eb5~~~~~~~~                   [M++â†’Hâ†’H++â†’H++â†’H+++]
â”‚  "be-     lieve   in      the     light~~~~~~~~"
â”‚  SSAATTBB: Sustained Ab major chord                            mf [H++,O++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s1m2">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 17-32: "that shines within you"                      f
â”‚  â™©Eb5 â”€â†’ â™©Db5 â”€â†’ â™©C5 â”€â†’ â—Bb4~~~~~~~~  (descending)             [H+++â†’H++â†’H++â†’H+]
â”‚  "that    shines  with-   in you~~~~~~~~"
â”‚  SSAATTBB: Imitative texture                                   f [H++,N++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s1m3">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 33-48: "you are the universe experiencing itself"    f â†’ ff
â”‚  â™©Ab4 â”€â†’ â™©C5 â”€â†’ â™©Eb5 â”€â†’ â™©G5 â”€â†’ â—Ab5~~~~~~~~  (ascending)       [M++â†’H++â†’H+++â†’H+++â†’H+++]
â”‚  "you     are     the     uni-    verse~~~~~~~~"
â”‚  SSAATTBB: Full 8-part texture, building                       ff [H+++,O+++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block climax-section" id="s1m4">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 49-64: "who BELIEVES!"                           fff â˜… CLIMAX â˜…
â”‚  â™©Ab4 â”€â†’ â™©C5 â”€â†’ â™©Eb5 â”€â†’ â—G5~~~~~~~~  "who â˜…BELIEVES!â˜…"         [M++â†’H++â†’H+++â†’H+++]
â”‚  SSAATTBB: Massive Ab major chord                              fff [H+++,O+++,M+++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
      </div>
      <div class="score-annotation">
        <strong>Performance Notes:</strong> "Believe" establishes Act III's triumphant tone. The Prophet's ascending line represents faith rising. VRN moves from Mixed to pure Head voice at the climax.
      </div>
    </section>

    <!-- SCENE 2: TRUTH -->
    <section class="score-section" id="scene2">
      <div class="score-header">
        <div class="score-header-info">
          <h3>Scene 2: "Truth" â€” SSAATTBB Score</h3>
          <div class="score-meta">
            <span>ğŸ¤ Sage (Contralto) + Chorus</span>
            <span>â±ï¸ Andante â™©= 58</span>
            <span>ğŸ”‘ E major</span>
            <span>ğŸ“ 4/4</span>
          </div>
        </div>
        <button class="play-btn" id="playScene2" onclick="togglePlay('scene2')" disabled>â–¶ Play Scene 2</button>
      </div>
      <div class="score-block">
<div class="measure-block" id="s2m1">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 1-16: "the truth is simple"                          p (wise)
â”‚  â™©E4 â”€â†’ â™©F#4 â”€â†’ â™©G#4 â”€â†’ â—A4~~~~~~~~                            [M++â†’M++â†’HMâ†’H]
â”‚  "the     truth   is      simple~~~~~~~~"
â”‚  SSAATTBB: Low voices only (T1T2B1B2)                          p [C++,M+]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s2m2">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 17-32: "yet hard to see"                             mp â†’ mf
â”‚  â™©A4 â”€â†’ â™©B4 â”€â†’ â™©C#5 â”€â†’ â—D#5~~~~~~~~  (ascending)               [Hâ†’H++â†’H++â†’H+++]
â”‚  "yet     hard    to      see~~~~~~~~"
â”‚  SSAATTBB: High voices enter (S1S2A1A2)                        mf [H++,N+]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s2m3">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 33-48: "we are all connected"                        f
â”‚  â™©E4 â”€â†’ â™©G#4 â”€â†’ â™©B4 â”€â†’ â™©D#5 â”€â†’ â—E5~~~~~~~~                     [M++â†’H++â†’H++â†’H+++â†’H+++]
â”‚  "we      are     all     con-    nected~~~~~~~~"
â”‚  SSAATTBB: Full 8-part homophonic                              f [H+++,O++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block climax-section" id="s2m4">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 49-64: "we are ONE"                              fff â˜… CLIMAX â˜…
â”‚  â™©E4 â”€â†’ â™©G#4 â”€â†’ â™©B4 â”€â†’ â—E5~~~~~~~~  "we are â˜…ONE!â˜…"            [M++â†’H++â†’H+++â†’H+++]
â”‚  SSAATTBB: E major chord, triumphant                           fff [H+++,O+++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s2m5">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 65-80: "love... love..."                             f â†’ pp
â”‚  â—B4~~~~~~~~  "love"                                           f [H++]
â”‚  â—G#4~~~~~~~~  "love"                                          mf [H+]
â”‚  â—E4~~~~~~~~  "love..."                                        p â†’ pp [Mâ†’C]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
      </div>
      <div class="score-annotation">
        <strong>Performance Notes:</strong> The Sage's wisdom reveals that truth is unity. Low voices represent ancient wisdom, high voices represent revelation. Final "love" fades to sacred silence.
      </div>
    </section>

    <!-- SCENE 3: TRANSCEND -->
    <section class="score-section" id="scene3">
      <div class="score-header">
        <div class="score-header-info">
          <h3>Scene 3: "Transcend" â€” SSAATTBB Score</h3>
          <div class="score-meta">
            <span>ğŸ¤ Visionary (Soprano) + Chorus</span>
            <span>â±ï¸ Estatico â™©= 66</span>
            <span>ğŸ”‘ F# major</span>
            <span>ğŸ“ 4/4</span>
          </div>
        </div>
        <button class="play-btn" id="playScene3" onclick="togglePlay('scene3')" disabled>â–¶ Play Scene 3</button>
      </div>
      <div class="score-block">
<div class="measure-block" id="s3m1">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 1-16: "transcend the boundaries"                     p â†’ mf
â”‚  â™©F#4 â”€â†’ â™©G#4 â”€â†’ â™©A#4 â”€â†’ â™©B4 â”€â†’ â—C#5~~~~~~~~                   [Mâ†’Mâ†’HMâ†’Hâ†’H]
â”‚  "trans-  cend    the     bound-  aries~~~~~~~~"
â”‚  SSAATTBB: Women humming, men sustain                          p [H+,N+]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s3m2">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 17-32: "let go of everything you know"               mf
â”‚  â™©C#5 â”€â†’ â™©D#5 â”€â†’ â—E#5~~~~~~~~  "let go"                        [Hâ†’Hâ†’H]
â”‚  â™©F#4 â”€â†’ â™©A#4 â”€â†’ â—C#5~~~~~~~~  "everything you know"           [Mâ†’HMâ†’H]
â”‚  SSAATTBB: Cascading entries                                   mf [H++,O++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s3m3">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 33-48: "rise above the illusion"                     f
â”‚  â™©F#4 â”€â†’ â™©A#4 â”€â†’ â™©C#5 â”€â†’ â™©E#5 â”€â†’ â—F#5~~~~~~~~                  [Mâ†’HMâ†’Hâ†’Hâ†’H]
â”‚  "rise    a-      bove    illu-   sion~~~~~~~~"
â”‚  SSAATTBB: Full ascending texture                              f [H+++,Oc++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block climax-section" id="s3m4">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 49-64: "we are already THERE!"                   fff â˜… CLIMAX â˜…
â”‚  â™©F#4 â”€â†’ â™©A#4 â”€â†’ â™©C#5 â”€â†’ â™©F#5 â”€â†’ â—A#5~~~~~~~~                  [Mâ†’HMâ†’Hâ†’Hâ†’H]
â”‚  "we      are     al-     rea-    dy â˜…THERE!â˜…~~~~~~~~"         fff
â”‚  SSAATTBB: F# major chord with S1 descant to A#5               fff [H+++,O+++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
      </div>
      <div class="score-annotation">
        <strong>Performance Notes:</strong> "Transcend" reveals that enlightenment is already present. The climax "THERE!" should feel like sudden awakening. Soprano soars to A#5.
      </div>
    </section>

    <!-- SCENE 4: RETURN -->
    <section class="score-section" id="scene4">
      <div class="score-header">
        <div class="score-header-info">
          <h3>Scene 4: "Return" â€” SSAATTBB Score</h3>
          <div class="score-meta">
            <span>ğŸ¤ Elder (Bass) + Chorus</span>
            <span>â±ï¸ Solenne â™©= 54</span>
            <span>ğŸ”‘ C major</span>
            <span>ğŸ“ 4/4</span>
          </div>
        </div>
        <button class="play-btn" id="playScene4" onclick="togglePlay('scene4')" disabled>â–¶ Play Scene 4</button>
      </div>
      <div class="score-block">
<div class="measure-block" id="s4m1">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 1-16: "we return to the source"                      p (profound)
â”‚  â™©C3 â”€â†’ â™©D3 â”€â†’ â™©E3 â”€â†’ â™©F3 â”€â†’ â—G3~~~~~~~~                       [Câ†’Câ†’Câ†’Câ†’CM]
â”‚  "we      re-     turn    to      the source~~~~~~~~"
â”‚  SSAATTBB: Low voices lead, high follow                        p [C++,P++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s4m2">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 17-32: "from which we came"                          mp â†’ mf
â”‚  â™©G3 â”€â†’ â™©A3 â”€â†’ â™©B3 â”€â†’ â—C4~~~~~~~~  (ascending)                 [CMâ†’CMâ†’Mâ†’M]
â”‚  "from    which   we      came~~~~~~~~"
â”‚  SSAATTBB: Gradual voice entries                               mf [M++,H+]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s4m3">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 33-48: "the eternal cycle continues"                 mf â†’ f
â”‚  â™©C4 â”€â†’ â™©D4 â”€â†’ â™©E4 â”€â†’ â™©F4 â”€â†’ â™©G4 â”€â†’ â—A4~~~~~~~~                [Mâ†’Mâ†’HMâ†’HMâ†’Hâ†’H]
â”‚  "the     eter-   nal     cy-     cle     continues~~~~~~~~"
â”‚  SSAATTBB: Full 8-part texture                                 f [H++,O++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block climax-section" id="s4m4">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 49-64: "death is but a new BIRTH!"               fff â˜… CLIMAX â˜…
â”‚  â™©C4 â”€â†’ â™©E4 â”€â†’ â™©G4 â”€â†’ â™©B4 â”€â†’ â—C5~~~~~~~~                       [Mâ†’HMâ†’Hâ†’H++â†’H+++]
â”‚  "death   is      but     a new   â˜…BIRTH!â˜…~~~~~~~~"            fff
â”‚  SSAATTBB: Triumphant C major                                  fff [H+++,O+++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
      </div>
      <div class="score-annotation">
        <strong>Performance Notes:</strong> "Return" speaks of the eternal cycle. The Elder's bass grounds the ensemble. The revelation that "death is but a new birth" should be triumphant, not mournful.
      </div>
    </section>

    <!-- SCENE 5: COSMOS - OPERA CLIMAX -->
    <section class="score-section" id="scene5">
      <div class="score-header ultimate">
        <div class="score-header-info">
          <h3>Scene 5: "COSMOS" â€” â˜…â˜…â˜… OPERA CLIMAX â˜…â˜…â˜…</h3>
          <div class="score-meta">
            <span>ğŸ¤ FULL COMPANY + SSAATTBB</span>
            <span>â±ï¸ Maestoso â†’ Trionfante â™©= 88</span>
            <span>ğŸ”‘ C major â†’ ALL KEYS</span>
            <span>ğŸ“ 4/4</span>
          </div>
        </div>
        <button class="play-btn" id="playScene5" onclick="togglePlay('scene5')" disabled>â–¶ Play Scene 5</button>
      </div>
      <div class="score-block">
<div class="measure-block" id="s5m1">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 1-16: "we are the cosmos awakening"                  f (majestic)
â”‚  â™©C4 â”€â†’ â™©D4 â”€â†’ â™©E4 â”€â†’ â™©F4 â”€â†’ â™©G4 â”€â†’ â—A4~~~~~~~~                [Câ†’Câ†’CMâ†’CMâ†’Mâ†’M]
â”‚  "we      are     the     cos-    mos     awakening~~~~~~~~"
â”‚  SSAATTBB: Full 8-part ascending                               f [H++,O++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s5m2">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 17-32: "stars looking back at stars"                 ff
â”‚  â™©C4 â”€â†’ â™©E4 â”€â†’ â™©G4 â”€â†’ â—C5~~~~~~~~  "stars looking"             [Câ†’CMâ†’Mâ†’H]
â”‚  â™©B4 â”€â†’ â™©G4 â”€â†’ â™©E4 â”€â†’ â—C4~~~~~~~~  "back at stars"             [HMâ†’Mâ†’CMâ†’C]
â”‚  SSAATTBB: Antiphonal (high/low exchange)                      ff [H+++,M++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s5m3">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 33-48: "love looking back at love"                   ff
â”‚  â™©C4 â”€â†’ â™©E4 â”€â†’ â™©G4 â”€â†’ â™©B4 â”€â†’ â—D5~~~~~~~~  "love looking"       [Câ†’CMâ†’Mâ†’HMâ†’H]
â”‚  â™©C5 â”€â†’ â™©A4 â”€â†’ â™©F4 â”€â†’ â—C4~~~~~~~~  "back at love"              [Hâ†’Mâ†’CMâ†’C]
â”‚  SSAATTBB: Mirror effect (ascending/descending)                ff [H+++,O+++]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block ultimate-climax" id="s5m4">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 49-80: "WE ARE ONE!"                          ffff â˜…â˜…â˜…â˜…â˜… ULTIMATE â˜…â˜…â˜…â˜…â˜…
â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â”‚  â•‘   â—C6 â•â•â•  â—G5 â•â•â•  â—E5 â•â•â•  â—C5 â•â•â•  â—G4 â•â•â•  â—E4 â•â•â•  â—C4 â•â•â•      â•‘
â”‚  â•‘   â—G3 â•â•â•  â—C3 â•â•â•  â—C2 â•â•â•                                          â•‘
â”‚  â•‘                                                                       â•‘
â”‚  â•‘       "â˜…â˜…â˜…â˜…â˜… WE ARE ONE! â˜…â˜…â˜…â˜…â˜…"   [ALL] ffff                          â•‘
â”‚  â•‘       Full C major chord spanning FOUR OCTAVES (C2-C6)                â•‘
â”‚  â•‘       SSAATTBB + ALL SOLOISTS + ORCHESTRA TUTTI                       â•‘
â”‚  â•‘       VRN: [H+++,O+++,M+++,C+++] MAXIMUM RESONANCE                    â•‘
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s5m5">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 81-100: "we... are... one..."                        ff â†’ p
â”‚  â—G5~~~~~~~~  "we"                                             ff [H++]
â”‚  â—E5~~~~~~~~  "are"                                            mf [H+]
â”‚  â—C5~~~~~~~~  "one"                                            mp [H]
â”‚  â—G4~~~~~~~~  "..."                                            p [M]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
<div class="measure-block" id="s5m6">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚  MEASURES 101-120: "cos... mos..."                             p â†’ ppp (sacred)
â”‚  â—E4~~~~~~~~  "cos"                                            p [CM]
â”‚  â—C4~~~~~~~~  "mos"                                            pp [C]
â”‚  â—C3~~~~~~~~  "..."                                            ppp [C]
â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚                            ~ FINE ~
â”‚                     END OF COSMOS THE OPERA
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>
      </div>
      <div class="score-annotation">
        <strong>Performance Notes:</strong> "COSMOS" is the ultimate climax. The revelation "WE ARE ONE!" at ffff - all forces at maximum power, 4-octave C major chord. The final whispered "cos...mos..." returns to the beginning, completing the eternal cycle. Hold silence before curtain.
      </div>
    </section>

    <div class="sheet-nav" style="margin-top: 40px; border-top: 1px solid rgba(255,255,255,0.05); border-bottom: none;">
      <div class="sheet-nav-inner">
        <span class="label" style="color: var(--accent-cyan);">SATB:</span>
        <a href="sheet-music.html">Index</a>
        <a href="sheet-music-act1-p1.html">I:1-2</a>
        <a href="sheet-music-act1-p2.html">I:3-5</a>
        <a href="sheet-music-act2.html">II</a>
        <a href="sheet-music-act3-p1.html">III:1-2</a>
        <a href="sheet-music-act3-p2.html" class="climax">III:3-5â˜…</a>
        <span class="divider">|</span>
        <span class="label" style="color: var(--accent-gold);">SSAATTBB:</span>
        <a href="ssaattbb-index.html">Index</a>
        <a href="ssaattbb-act1.html">Act I</a>
        <a href="ssaattbb-act2.html">Act II</a>
        <a href="ssaattbb-act3.html" class="climax active-gold">Act III â˜…</a>
      </div>
    </div>
    <nav class="page-nav">
      <a href="ssaattbb-act2.html">â† Act II</a>
      <a href="ssaattbb-index.html">SSAATTBB Index</a>
    </nav>
  </main>
  <footer class="footer">
    <p>Â© 2002-2026 COSMOS the OPERA. All Rights Reserved. DMCA Protected.<br>
    <a href="index.html">Home</a> | <a href="ssaattbb-index.html">SSAATTBB Index</a></p>
  </footer>
  <script>
let audioReady=false,synths=[],reverb=null,chorus=null,isPlaying={},currentMeasure=null,currentScene=null,continuousMode=false,loopMode=false,activeVoices=['pure'];
const NEXT_PAGE=null;
const PAGE_SCENES=['scene1','scene2','scene3','scene4','scene5'];

const scene1Data={tempo:76,notes:[
{note:'Ab4',duration:0.5,text:'be-',dyn:0.6,m:'s1m1'},{note:'Bb4',duration:0.5,text:'lieve',dyn:0.65,m:'s1m1'},{note:'C5',duration:0.5,text:'in',dyn:0.7,m:'s1m1'},{note:'Db5',duration:0.5,text:'the',dyn:0.75,m:'s1m1'},{note:'Eb5',duration:2.5,text:'light',dyn:0.8,m:'s1m1'},{note:null,duration:0.5,m:'s1m1'},
{note:'Eb5',duration:0.5,text:'that',dyn:0.75,m:'s1m2'},{note:'Db5',duration:0.5,text:'shines',dyn:0.7,m:'s1m2'},{note:'C5',duration:0.5,text:'with-',dyn:0.65,m:'s1m2'},{note:'Bb4',duration:2.5,text:'in',dyn:0.6,m:'s1m2'},{note:null,duration:0.5,m:'s1m2'},
{note:'Ab4',duration:0.4,text:'you',dyn:0.7,m:'s1m3'},{note:'C5',duration:0.4,text:'are',dyn:0.8,m:'s1m3'},{note:'Eb5',duration:0.4,text:'the',dyn:0.85,m:'s1m3'},{note:'G5',duration:0.4,text:'uni-',dyn:0.9,m:'s1m3'},{note:'Ab5',duration:3,text:'verse',dyn:0.95,m:'s1m3'},{note:null,duration:0.5,m:'s1m3'},
{note:'Ab4',duration:0.4,text:'who',dyn:0.9,m:'s1m4'},{note:'C5',duration:0.4,dyn:0.95,m:'s1m4'},{note:'Eb5',duration:0.4,dyn:0.95,m:'s1m4'},{note:'G5',duration:4,text:'BELIEVES!',dyn:1.0,m:'s1m4'}
]};

const scene2Data={tempo:58,notes:[
{note:'E4',duration:0.75,text:'the',dyn:0.4,m:'s2m1'},{note:'F#4',duration:0.75,text:'truth',dyn:0.45,m:'s2m1'},{note:'G#4',duration:0.75,text:'is',dyn:0.45,m:'s2m1'},{note:'A4',duration:2.5,text:'simple',dyn:0.5,m:'s2m1'},{note:null,duration:0.5,m:'s2m1'},
{note:'A4',duration:0.5,text:'yet',dyn:0.5,m:'s2m2'},{note:'B4',duration:0.5,text:'hard',dyn:0.55,m:'s2m2'},{note:'C#5',duration:0.5,text:'to',dyn:0.6,m:'s2m2'},{note:'D#5',duration:2.5,text:'see',dyn:0.65,m:'s2m2'},{note:null,duration:0.5,m:'s2m2'},
{note:'E4',duration:0.5,text:'we',dyn:0.7,m:'s2m3'},{note:'G#4',duration:0.5,text:'are',dyn:0.75,m:'s2m3'},{note:'B4',duration:0.5,text:'all',dyn:0.8,m:'s2m3'},{note:'D#5',duration:0.5,text:'con-',dyn:0.85,m:'s2m3'},{note:'E5',duration:2.5,text:'nected',dyn:0.9,m:'s2m3'},{note:null,duration:0.5,m:'s2m3'},
{note:'E4',duration:0.4,text:'we',dyn:0.9,m:'s2m4'},{note:'G#4',duration:0.4,text:'are',dyn:0.95,m:'s2m4'},{note:'B4',duration:0.4,dyn:0.95,m:'s2m4'},{note:'E5',duration:4,text:'ONE!',dyn:1.0,m:'s2m4'},{note:null,duration:0.5,m:'s2m4'},
{note:'B4',duration:2.5,text:'love',dyn:0.7,m:'s2m5'},{note:'G#4',duration:2.5,text:'love',dyn:0.55,m:'s2m5'},{note:'E4',duration:3,text:'love...',dyn:0.35,m:'s2m5'}
]};

const scene3Data={tempo:66,notes:[
{note:'F#4',duration:0.5,text:'trans-',dyn:0.45,m:'s3m1'},{note:'G#4',duration:0.5,text:'cend',dyn:0.5,m:'s3m1'},{note:'A#4',duration:0.5,text:'the',dyn:0.55,m:'s3m1'},{note:'B4',duration:0.5,text:'bound-',dyn:0.6,m:'s3m1'},{note:'C#5',duration:2.5,text:'aries',dyn:0.65,m:'s3m1'},{note:null,duration:0.5,m:'s3m1'},
{note:'C#5',duration:0.5,text:'let',dyn:0.6,m:'s3m2'},{note:'D#5',duration:0.5,text:'go',dyn:0.65,m:'s3m2'},{note:'E#5',duration:2,dyn:0.7,m:'s3m2'},{note:'F#4',duration:0.5,text:'ev-',dyn:0.55,m:'s3m2'},{note:'A#4',duration:0.5,text:'ery-',dyn:0.6,m:'s3m2'},{note:'C#5',duration:2,text:'thing',dyn:0.65,m:'s3m2'},{note:null,duration:0.5,m:'s3m2'},
{note:'F#4',duration:0.4,text:'rise',dyn:0.7,m:'s3m3'},{note:'A#4',duration:0.4,text:'a-',dyn:0.75,m:'s3m3'},{note:'C#5',duration:0.4,text:'bove',dyn:0.8,m:'s3m3'},{note:'E#5',duration:0.4,text:'illu-',dyn:0.85,m:'s3m3'},{note:'F#5',duration:2.5,text:'sion',dyn:0.9,m:'s3m3'},{note:null,duration:0.5,m:'s3m3'},
{note:'F#4',duration:0.4,text:'we',dyn:0.85,m:'s3m4'},{note:'A#4',duration:0.4,text:'are',dyn:0.9,m:'s3m4'},{note:'C#5',duration:0.4,text:'al-',dyn:0.95,m:'s3m4'},{note:'F#5',duration:0.4,text:'rea-',dyn:0.95,m:'s3m4'},{note:'A#5',duration:4,text:'THERE!',dyn:1.0,m:'s3m4'}
]};

const scene4Data={tempo:54,notes:[
{note:'C3',duration:0.75,text:'we',dyn:0.4,m:'s4m1'},{note:'D3',duration:0.75,text:'re-',dyn:0.4,m:'s4m1'},{note:'E3',duration:0.75,text:'turn',dyn:0.45,m:'s4m1'},{note:'F3',duration:0.75,text:'to',dyn:0.45,m:'s4m1'},{note:'G3',duration:2.5,text:'source',dyn:0.5,m:'s4m1'},{note:null,duration:0.5,m:'s4m1'},
{note:'G3',duration:0.5,text:'from',dyn:0.5,m:'s4m2'},{note:'A3',duration:0.5,text:'which',dyn:0.55,m:'s4m2'},{note:'B3',duration:0.5,text:'we',dyn:0.55,m:'s4m2'},{note:'C4',duration:2.5,text:'came',dyn:0.6,m:'s4m2'},{note:null,duration:0.5,m:'s4m2'},
{note:'C4',duration:0.4,text:'the',dyn:0.6,m:'s4m3'},{note:'D4',duration:0.4,text:'eter-',dyn:0.65,m:'s4m3'},{note:'E4',duration:0.4,text:'nal',dyn:0.7,m:'s4m3'},{note:'F4',duration:0.4,text:'cy-',dyn:0.7,m:'s4m3'},{note:'G4',duration:0.4,text:'cle',dyn:0.75,m:'s4m3'},{note:'A4',duration:2,text:'continues',dyn:0.8,m:'s4m3'},{note:null,duration:0.5,m:'s4m3'},
{note:'C4',duration:0.4,text:'death',dyn:0.8,m:'s4m4'},{note:'E4',duration:0.4,text:'is',dyn:0.85,m:'s4m4'},{note:'G4',duration:0.4,text:'but',dyn:0.9,m:'s4m4'},{note:'B4',duration:0.4,text:'new',dyn:0.95,m:'s4m4'},{note:'C5',duration:4,text:'BIRTH!',dyn:1.0,m:'s4m4'}
]};

const scene5Data={tempo:88,notes:[
{note:'C4',duration:0.3,text:'we',dyn:0.7,m:'s5m1'},{note:'D4',duration:0.3,text:'are',dyn:0.7,m:'s5m1'},{note:'E4',duration:0.3,text:'the',dyn:0.75,m:'s5m1'},{note:'F4',duration:0.3,text:'cos-',dyn:0.75,m:'s5m1'},{note:'G4',duration:0.3,text:'mos',dyn:0.8,m:'s5m1'},{note:'A4',duration:2,text:'awakening',dyn:0.85,m:'s5m1'},{note:null,duration:0.5,m:'s5m1'},
{note:'C4',duration:0.4,text:'stars',dyn:0.85,m:'s5m2'},{note:'E4',duration:0.4,text:'look-',dyn:0.85,m:'s5m2'},{note:'G4',duration:0.4,text:'ing',dyn:0.9,m:'s5m2'},{note:'C5',duration:1.5,dyn:0.9,m:'s5m2'},{note:'B4',duration:0.4,text:'back',dyn:0.85,m:'s5m2'},{note:'G4',duration:0.4,text:'at',dyn:0.8,m:'s5m2'},{note:'E4',duration:0.4,dyn:0.75,m:'s5m2'},{note:'C4',duration:1.5,text:'stars',dyn:0.7,m:'s5m2'},{note:null,duration:0.5,m:'s5m2'},
{note:'C4',duration:0.4,text:'love',dyn:0.85,m:'s5m3'},{note:'E4',duration:0.4,text:'look-',dyn:0.85,m:'s5m3'},{note:'G4',duration:0.4,text:'ing',dyn:0.9,m:'s5m3'},{note:'B4',duration:0.4,dyn:0.9,m:'s5m3'},{note:'D5',duration:1.5,dyn:0.95,m:'s5m3'},{note:'C5',duration:0.4,text:'back',dyn:0.85,m:'s5m3'},{note:'A4',duration:0.4,text:'at',dyn:0.8,m:'s5m3'},{note:'F4',duration:0.4,dyn:0.75,m:'s5m3'},{note:'C4',duration:1.5,text:'love',dyn:0.7,m:'s5m3'},{note:null,duration:0.5,m:'s5m3'},
{note:'C3',duration:0.2,dyn:0.9,m:'s5m4'},{note:'G3',duration:0.2,dyn:0.92,m:'s5m4'},{note:'C4',duration:0.2,dyn:0.94,m:'s5m4'},{note:'E4',duration:0.2,dyn:0.96,m:'s5m4'},{note:'G4',duration:0.2,dyn:0.98,m:'s5m4'},{note:'C5',duration:0.2,dyn:1.0,m:'s5m4'},{note:'E5',duration:0.2,dyn:1.0,m:'s5m4'},{note:'G5',duration:0.2,dyn:1.0,m:'s5m4'},{note:'C6',duration:5,text:'WE ARE ONE!',dyn:1.0,m:'s5m4'},{note:null,duration:1,m:'s5m4'},
{note:'G5',duration:2,text:'we',dyn:0.85,m:'s5m5'},{note:'E5',duration:2,text:'are',dyn:0.7,m:'s5m5'},{note:'C5',duration:2,text:'one',dyn:0.55,m:'s5m5'},{note:'G4',duration:2.5,dyn:0.45,m:'s5m5'},{note:null,duration:0.5,m:'s5m5'},
{note:'E4',duration:2.5,text:'cos',dyn:0.4,m:'s5m6'},{note:'C4',duration:2.5,text:'mos',dyn:0.3,m:'s5m6'},{note:'C3',duration:4,dyn:0.2,m:'s5m6'}
]};

const sceneDataMap={scene1:scene1Data,scene2:scene2Data,scene3:scene3Data,scene4:scene4Data,scene5:scene5Data};

const voicePresets={
  pure:{osc:'sine',attack:0.1,decay:0.2,sustain:0.85,release:1.2,vol:-6},
  choir:{osc:'triangle',attack:0.15,decay:0.3,sustain:0.9,release:1.5,vol:-8},
  organ:{osc:'square',attack:0.01,decay:0.1,sustain:0.95,release:0.3,vol:-12},
  strings:{osc:'sawtooth',attack:0.3,decay:0.4,sustain:0.8,release:2,vol:-10},
  rich:{osc:'fatsine',attack:0.12,decay:0.25,sustain:0.88,release:1.4,vol:-8}
};

async function initAudio(){
  const btn=document.getElementById('audioInitBtn');btn.textContent='Initializing...';btn.disabled=true;
  try{
    await Tone.start();
    reverb=new Tone.Reverb({decay:5,wet:0.5}).toDestination();
    chorus=new Tone.Chorus({frequency:2,delayTime:3.5,depth:0.7,wet:0.3}).connect(reverb);
    createSynths();
    audioReady=true;btn.textContent='âœ“ Audio Ready';btn.classList.add('ready');
    document.getElementById('voiceOptions').classList.add('enabled');
    ['playScene1','playScene2','playScene3','playScene4','playScene5'].forEach(id=>document.getElementById(id).disabled=false);
    document.getElementById('playAllBtn').disabled=false;
    checkAutoplay();
  }catch(e){btn.textContent='Audio Failed';console.error(e);}
}

function createSynths(){
  synths.forEach(s=>{s.disconnect();s.dispose();});
  synths=[];
  const checkboxes=document.querySelectorAll('.voice-checkbox input:checked');
  activeVoices=[...checkboxes].map(cb=>cb.value);
  if(activeVoices.length===0){activeVoices=['pure'];document.querySelector('.voice-checkbox input[value="pure"]').checked=true;}
  activeVoices.forEach(voice=>{
    const p=voicePresets[voice];
    const s=new Tone.PolySynth(Tone.Synth,{oscillator:{type:p.osc},envelope:{attack:p.attack,decay:p.decay,sustain:p.sustain,release:p.release},volume:p.vol});
    s.connect(chorus);
    synths.push(s);
  });
}

function changeVoice(){
  if(audioReady)createSynths();
}

function checkAutoplay(){const params=new URLSearchParams(window.location.search);if(params.get('autoplay')==='continuous'){continuousMode=true;playAllScenesSequentially();}}

function scrollToMeasure(id){if(currentMeasure)document.getElementById(currentMeasure)?.classList.remove('active');const el=document.getElementById(id);if(el&&id!==currentMeasure){el.classList.add('active');el.scrollIntoView({behavior:'smooth',block:'center'});currentMeasure=id;}}

async function playScene(sceneId){
  const data=sceneDataMap[sceneId];if(!data)return;
  const bpm=data.tempo,beatDuration=60/bpm;
  let totalBeats=data.notes.reduce((s,n)=>s+n.duration,0),currentBeat=0;
  const floatingControls=document.getElementById('floatingControls'),progressBar=document.getElementById('floatingProgress'),noteDisplay=document.getElementById('floatingNote'),textDisplay=document.getElementById('floatingText');
  floatingControls.classList.add('visible');
  if(continuousMode){floatingControls.classList.add('continuous');document.getElementById('continuousBadge').style.display='inline';}
  scrollToMeasure(data.notes[0].m);
  for(let i=0;i<data.notes.length;i++){
    if(!isPlaying[sceneId])return false;
    const note=data.notes[i],durationSec=note.duration*beatDuration;
    scrollToMeasure(note.m);
    if(note.note){noteDisplay.textContent=note.note;textDisplay.textContent=note.text?'"'+note.text+'"':'â™ª';synths.forEach(s=>s.triggerAttackRelease(note.note,durationSec*0.9,Tone.now(),note.dyn));}
    else{noteDisplay.textContent='â€”';textDisplay.textContent='(rest)';}
    currentBeat+=note.duration;progressBar.style.width=(currentBeat/totalBeats)*100+'%';
    await new Promise(r=>setTimeout(r,durationSec*1000));
  }
  return true;
}

async function togglePlay(sceneId){
  if(!audioReady)return;
  if(currentScene&&currentScene!==sceneId){stopAll();}
  const btnMap={scene1:'playScene1',scene2:'playScene2',scene3:'playScene3',scene4:'playScene4',scene5:'playScene5'};
  const playBtn=document.getElementById(btnMap[sceneId]);
  if(isPlaying[sceneId]){stopAll();return;}
  continuousMode=false;isPlaying[sceneId]=true;currentScene=sceneId;
  playBtn.classList.add('playing');playBtn.textContent='â¸ Playing...';
  let completed=true;
  while(completed&&isPlaying[sceneId]){
    completed=await playScene(sceneId);
    if(!loopMode||!isPlaying[sceneId])break;
  }
  if(!loopMode)stopAll();
}

async function playAllScenesSequentially(){
  for(const sceneId of PAGE_SCENES){
    if(!continuousMode)break;
    const btnMap={scene1:'playScene1',scene2:'playScene2',scene3:'playScene3',scene4:'playScene4',scene5:'playScene5'};
    const btn=document.getElementById(btnMap[sceneId]);
    isPlaying[sceneId]=true;currentScene=sceneId;
    btn.classList.add('playing');btn.textContent='â¸ Playing...';
    const completed=await playScene(sceneId);
    btn.classList.remove('playing');btn.textContent='â–¶ Play Scene '+(PAGE_SCENES.indexOf(sceneId)+1);
    isPlaying[sceneId]=false;
    if(!completed||!continuousMode)break;
  }
  if(continuousMode){
    document.getElementById('operaComplete').classList.add('visible');
    setTimeout(()=>{document.getElementById('operaComplete').classList.remove('visible');stopAll();},5000);
  }
  else{stopAll();}
}

function playFullOpera(){if(!audioReady)return;stopAll();continuousMode=true;document.getElementById('playAllBtn').textContent='â¸ Playing Opera...';playAllScenesSequentially();}

function stopAll(){
  continuousMode=false;loopMode=false;Object.keys(isPlaying).forEach(k=>isPlaying[k]=false);currentScene=null;
  ['playScene1','playScene2','playScene3','playScene4','playScene5'].forEach((id,i)=>{const btn=document.getElementById(id);if(btn){btn.classList.remove('playing');btn.textContent='â–¶ Play Scene '+(i+1);}});
  document.getElementById('playAllBtn').textContent='â–¶ Play Full Opera';
  document.getElementById('floatingControls').classList.remove('visible','continuous');
  document.getElementById('continuousBadge').style.display='none';
  document.getElementById('floatingProgress').style.width='0%';
  document.getElementById('floatingNote').textContent='--';
  document.getElementById('floatingText').textContent='Ready';
  document.getElementById('loopBtn').classList.remove('active');
  if(currentMeasure){document.getElementById(currentMeasure)?.classList.remove('active');currentMeasure=null;}
  if(synths.length)synths.forEach(s=>s.releaseAll());
}

function toggleLoop(){
  loopMode=!loopMode;
  const btn=document.getElementById('loopBtn');
  if(loopMode){btn.classList.add('active');btn.textContent='â†» Looping';}
  else{btn.classList.remove('active');btn.textContent='â†» Loop';}
}

window.onload=()=>{const params=new URLSearchParams(window.location.search);if(params.get('autoplay')==='continuous'){initAudio();}};
  </script>
</body>
</html>
